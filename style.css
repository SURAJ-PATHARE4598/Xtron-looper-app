/*
 Colorful Theme for Audio Sampler Synth (full)
 Includes colored slider filled portion using CSS var --pct
*/

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root{
  --bg-gradient: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  --panel: rgba(17,24,39,0.92);
  --muted: #cbd5e1;
  --accent-a: #3b82f6;
  --accent-b: #34d399;
  --accent-c: #f472b6;
  --accent-d: #f59e0b;
  --glass: rgba(255,255,255,0.04);
  --track-empty: rgba(255,255,255,0.06);
  --thumb: #ffffff;
}

/* page layout */
html,body{
  height:100%;
  margin:0;
  font-family: 'Inter', sans-serif;
  background: var(--bg-gradient);
  color: #f5f5f5;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

.container{
  width:100%;
  max-width:900px;
  margin:20px auto;
  padding:20px;
  box-sizing:border-box;
}

.card{
  background: var(--panel);
  border-radius:18px;
  padding:18px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  border: 1px solid rgba(255,255,255,0.06);
  backdrop-filter: blur(6px);
}

/* header */
h1{
  margin:0 0 8px 0;
  font-size:24px;
  font-weight:700;
  line-height:1;
  background: linear-gradient(90deg, var(--accent-c), var(--accent-a), var(--accent-b), var(--accent-d));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-align: center;
}

p.sub{
  margin:0 0 14px 0;
  color: var(--muted);
  font-size:14px;
  text-align: center;
}

/* waveform / markers */
.wave-wrap{
  position:relative;
  width:100%;
  height:160px;
  border-radius:14px;
  background: linear-gradient(180deg, rgba(6,9,16,0.95), rgba(14,22,35,0.95));
  border: 1px solid rgba(255,255,255,0.03);
  overflow:hidden;
  box-shadow: inset 0 4px 40px rgba(0,0,0,0.6);
  margin-top: 16px;
}

canvas#waveformCanvas{
  width:100%;
  height:100%;
  display:block;
  touch-action:none;
}

/* marker visual (keeps same API) */
.note-marker{
  position:absolute;
  top:0;
  width:6px;
  height:100%;
  transform:translateX(-50%);
  border-radius:3px;
  cursor:ew-resize;
  z-index:20;
  background: linear-gradient(180deg, #ffb86b, #ff6b6b);
  box-shadow: 0 0 10px rgba(255,107,107,0.85), 0 0 24px rgba(255,182,107,0.14);
}

/* piano */
.piano{
  margin-top:16px;
  background: linear-gradient(180deg, rgba(6,11,20,0.7), rgba(12,20,36,0.75));
  border-radius:12px;
  padding:12px;
  box-shadow: inset 0 6px 30px rgba(0,0,0,0.45);
}

.piano-container{
  position:relative;
  width:100%;
  height:150px;
}

/* keys */
.white-key, .black-key{
  position:absolute;
  border-radius:0 0 10px 10px;
  transition: transform .08s ease, box-shadow .1s ease, background-color .1s ease;
  cursor:pointer;
  user-select:none;
}

.white-key{
  width:12.5%; /* This will be set by JS based on count */
  height:100%;
  background: linear-gradient(180deg, #fbfbfb, #f0f4ff);
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
}

.black-key{
  width:8%; /* This will be set by JS */
  height:62%;
  background: linear-gradient(180deg, #10131b, #1f2937);
  border:1px solid rgba(255,255,255,0.02);
  z-index:30;
  box-shadow: 0 6px 18px rgba(0,0,0,0.5);
}

/* active key glows */
.white-key.active{
  background: linear-gradient(180deg, #a5d8ff, #3b82f6);
  box-shadow: 0 0 16px rgba(59,130,246,0.9), 0 10px 30px rgba(59,130,246,0.12);
  transform: translateY(2px);
}
.black-key.active{
  background: linear-gradient(180deg, #ffafcc, #f472b6);
  box-shadow: 0 0 18px rgba(244,114,182,0.95), 0 10px 30px rgba(244,114,182,0.08);
  transform: translateY(2px);
}

/* controls grid */
.controls{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap:12px;
  margin-top:16px;
}

.control{
  background: var(--glass);
  padding:12px;
  border-radius:12px;
  color:var(--muted);
  text-align:center;
  box-shadow: 0 6px 20px rgba(2,6,23,0.5);
}

.control small{ color:#bcd6ff; margin-left: 8px; }

label{ display:block; font-size:13px; font-weight:600; color: #fbbf24; margin-bottom:8px; }

/* file input */
input[type=file]{
  width:100%;
  padding:8px;
  border-radius:10px;
  border: 1px dashed rgba(59,130,246,0.35);
  background: rgba(59,130,246,0.06);
  color: #cfe8ff;
  cursor:pointer;
  box-sizing: border-box;
}

/* toast */
.toast{
  position:fixed;
  right:16px;
  bottom:16px;
  background: linear-gradient(135deg, #10b981, #3b82f6);
  color:#fff;
  padding:10px 16px;
  border-radius:12px;
  box-shadow: 0 8px 40px rgba(2,6,23,0.6);
  z-index:9999;
  font-weight:700;
}

/* ============================
   SLIDER STYLING (full)
   ============================ */

input[type=range]{
  width:100%;
  -webkit-appearance:none;
  appearance:none;
  height: 28px;
  margin: 6px 0;
  background: var(--track-empty);
  border-radius: 6px;
  outline: none;
  cursor: pointer;
  padding: 0;
  box-sizing: border-box;
  background-image: linear-gradient(90deg, var(--accent-a), var(--accent-b));
  background-size: var(--pct, 50%) 100%;
  background-repeat: no-repeat;
}

/* WebKit thumb */
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  appearance:none;
  width:18px;
  height:18px;
  border-radius:50%;
  background: var(--thumb);
  box-shadow: 0 6px 14px rgba(2,6,23,0.5), 0 0 10px rgba(59,130,246,0.14);
  border: 2px solid rgba(0,0,0,0.12);
  transition: transform .12s ease, box-shadow .12s ease;
  margin-top: -6px; /* Adjust to center on a 6px effective track */
}
input[type=range]::-webkit-slider-runnable-track {
  height: 6px;
  -webkit-appearance: none;
  color: transparent;
}


/* hover / active */
input[type=range]:hover::-webkit-slider-thumb{ transform: scale(1.08); box-shadow: 0 8px 20px rgba(2,6,23,0.55), 0 0 18px rgba(59,130,246,0.18); }
input[type=range]:active::-webkit-slider-thumb{ transform: scale(1.12); }

/* Firefox */
input[type=range]::-moz-range-track{
  height:6px;
  background: var(--track-empty);
  border-radius:3px;
}
input[type=range]::-moz-range-progress{
  height:6px;
  border-radius:3px;
  background: linear-gradient(90deg, var(--accent-a), var(--accent-b));
}
input[type=range]::-moz-range-thumb{
  width:18px;
  height:18px;
  background: var(--thumb);
  border-radius:50%;
  border: 2px solid rgba(0,0,0,0.12);
  box-shadow: 0 6px 14px rgba(2,6,23,0.5);
}

/* small screens adjustments */
@media (max-width:640px){
  .container{ margin:12px auto; padding:12px; }
  .piano-container{ height:110px; }
  .wave-wrap{ height:120px; }
  input[type=range]{ height:36px; } /* more comfortable thumb touch area */
}

/* accessibility focus */
input[type=range]:focus{
  box-shadow: 0 0 0 4px rgba(59,130,246,0.12);
  outline:none;
}
